(()=>{"use strict";class t{constructor(t,s,e,i=0,h=0){this.y=s,this.x=t,this.img=new Image,this.img.src=e,this.shiftX=i,this.shiftY=h}get width(){return this.img.width}get height(){return this.img.height}move(){this.x=this.x+this.shiftX,this.y=this.y+this.shiftY}draw(t){t.drawImage(this.img,this.x,this.y)}stopMoving(){this.shiftX=0,this.shiftY=0}}class s extends t{#t;constructor(t,s,e){super(t,s,"./images/balle24.png",8,4),this.theGame=e,this.#t=!1}get ballStopped(){return this.#t}set ballStopped(t){this.#t=t}move(){console.log("move balle"),this.y<=0||this.y+this.height>=this.theGame.canvas.height?(this.shiftY=-this.shiftY,super.move()):this.x<=0?(console.log("else if Ball"),this.stopMoving(),this.ballStopped=!0,document.getElementById("score1").value=parseInt(document.getElementById("score1").value)+1):this.x+this.width>=this.theGame.canvas.width&&(this.stopMoving(),this.ballStopped=!0,document.getElementById("score").value=parseInt(document.getElementById("score").value)+1),super.move(),console.log("super.move()")}collisionWith(t){console.log("mobile y:"+t.y),console.log("mobile height:"+t.height);const s=this.x>=t.x&&this.x<=t.x+t.width&&this.y>=t.y&&this.y<=t.y+t.height,e=this.x<=t.x&&this.x>=t.x-t.width&&this.y>=t.y&&this.y<=t.y+t.height;if(s&&t.x<this.theGame.canvas.width/2||e&&t.x>this.theGame.canvas.width/2){const s=this.y-t.y;console.log("impact"+s);const e=this.zoneCord(t,s);console.log("n"+e)}else console.log("nocollision"+this.mobile+" "+t.width),console.log("nocollision"+this.x)}zoneCord(t,s){console.log("Ycord"+s);const e=t.height;let i;0<=s&&s<11||77<=s&&s<=88?i=-3:11<=s&&s<22||66<=s&&s<77?i=-2:22<=s&&s<33||55<=s&&s<66?i=-1:(33<=s&&s<44||44<=s&&s<55)&&(i=0),console.log("n="+i),this.updateShifts(s,i,e)}updateShifts(t,s,e){console.log("shiftx avant rebond"+this.shiftX),console.log("shifty avant rebond"+this.shiftY);const i=Math.floor(3*Math.random())+0;console.log("rebond randomnbr"+i),t>e/2?this.x<this.theGame.canvas.width/2?(console.log("rebond val "+s),console.log("rebond "+t+">"+e/2),this.shiftY=-s,this.shiftX=7-Math.abs(s)):(this.shiftY=-s,this.shiftX=-this.shiftX):(this.x<this.theGame.canvas.width/2?(console.log("rebond "+t+"<"+e/2),console.log("rebond val "+s),this.shiftY=s,this.shiftX=7-Math.abs(s)):(this.shiftY=s,this.shiftX=-this.shiftX),console.log("shiftx apres rebond"+this.shiftX),console.log("shifty apres rebond"+this.shiftY))}}class e extends t{constructor(t,s,e){super(t,s,"./images/paddle.png",0,8),this.theGame=e,this.moving=2}move(){this.verifyDirection()}moveDown(){this.shiftY=+Math.abs(this.shiftY),this.moving=4}moveUp(){this.shiftY=-Math.abs(this.shiftY),this.moving=3}noMove(){this.moving=2}stopMoving(){super.stopMoving()}verifyDirection(){3===this.moving?this.y=Math.max(0,this.y+this.shiftY):4===this.moving&&(this.y=Math.min(this.theGame.canvas.height-this.height,this.y+this.shiftY))}}class i{constructor(t){this.raf=null,this.canvas=t,this.ball=new s(this.canvas.width/2,this.canvas.height/2,this),this.paddle=new e(40,this.canvas.height/2,this),this.paddle1=new e(this.canvas.width-80,this.canvas.height/2,this)}start(){this.animate()}stop(){console.log("stop Game"),window.cancelAnimationFrame(this.raf)}animate(){this.moveAndDraw(),this.raf=window.requestAnimationFrame(this.animate.bind(this))}moveAndDraw(){const t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),0==this.ball.ballStopped?(window.removeEventListener("keydown",this.keySpacePress.bind(this)),this.ball.move(),this.ball.draw(t),this.paddle.move(),this.paddle.draw(t),this.paddle1.move(),this.paddle1.draw(t),this.ball.collisionWith(this.paddle),this.ball.collisionWith(this.paddle1)):(console.log("else game atteint"),this.ball.draw(t),this.paddle.draw(t),this.paddle1.draw(t),window.addEventListener("keydown",this.keySpacePress.bind(this)))}keyDownActionHandler(t){switch(t.keyCode){case 38:this.paddle1.moveUp();break;case 40:this.paddle1.moveDown();break;case 90:this.paddle.moveUp();break;case 83:this.paddle.moveDown()}t.preventDefault()}keyUpActionHandler(t){switch(t.keyCode){case 38:case 40:case 90:case 83:this.paddle.noMove(),this.paddle1.noMove();break;case 32:break;default:return}t.preventDefault()}keySpacePress(t){32==t.keyCode&&(console.log("espace case"),this.ball=new s(this.canvas.width/2,this.canvas.height/2,this))}reachTheWall(){return!!this.ball.ballStopped}}window.addEventListener("load",(()=>{const t=document.getElementById("field"),s=new i(t);document.getElementById("start").addEventListener("click",(()=>o(s)))}));let h=!1;const o=t=>{console.log("started"+h),h?h&&(console.log("else if started"),document.getElementById("start").value="jouer",t.stop()):(console.log("pong non started"),t.start(),document.getElementById("start").value="stop",t.moveAndDraw(),window.addEventListener("keydown",t.keyDownActionHandler.bind(t)),window.addEventListener("keyup",t.keyUpActionHandler.bind(t))),h=!h}})();